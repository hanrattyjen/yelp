<% if @restaurant.any? %>
  <% @restaurant.each do |restaurant| %>
    <div>
      <h2><%= link_to restaurant.name, restaurant_path(restaurant) %></h2>
      <h4><%= restaurant.description %> </h4>
      <h4>Average rating: <%= restaurant.average_rating.to_i %></h4>
      <% if current_user != nil && current_user.can_edit?(current_user, restaurant) %>
        <h4><%= link_to "Edit #{restaurant.name}", edit_restaurant_path(restaurant) %></h4>
      <% end %>
      <% if current_user != nil && current_user.can_delete?(current_user, restaurant) %>
        <h4><%= link_to "Delete #{restaurant.name}", restaurant_path(restaurant), method: :delete %></h4>
      <% end %>
      <% if current_user!= nil && !current_user.has_reviewed?(restaurant) %>
        <h4><%= link_to "Review #{restaurant.name}", new_restaurant_review_path(restaurant) %> </h4>
      <% end %>
  </div>
    <% if restaurant.reviews.any? %>
       <% restaurant.reviews.each do |review| %>
         <p><%= review.thoughts %> Rating: <%= review.rating %> <p>
         <% if current_user != nil && current_user.can_delete?(current_user, review) %>
            <p><%= link_to "Delete review", restaurant_reviews_path(review), method: :delete %></p>
        <% end %>
       <% end %>
     <% end %>
    <% end %>
<% else %>
  <h1>No restaurants yet</h1>
<% end %>
<%= link_to 'Add a restaurant', new_restaurant_path %>
